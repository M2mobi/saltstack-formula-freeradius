{% set indent_increment = 4 %}
{%- set _= mod.pop('enable') %}

{%- macro radius_block(value, key=None, operator=' = ', ind=0) -%}
    {%- if value is none or value == None or value == 'None' -%}
        {{ key|indent(ind, True) }}
    {%- elif value is boolean -%}
        {{ key|indent(ind, True) }}{{ operator }}{{ 'yes' if value else 'no' }}
    {%- elif value is number -%}
        {{ key|indent(ind, True) }}{{ operator }}{{ value }}
    {%- elif value is string -%}
        {{ key|indent(ind, True) }}{{ operator }}'{{ value }}'
    {%- elif value is mapping -%}
        {{ key|indent(ind, True) }} {{ '{' }}
        {%- for k, v in value.items() %}
        {%- if v is mapping and k == 'data' and 'body' in value and value.body == 'json' %}
        {{ k }}{{ operator }}'{{ v | json }}'
        {%- else %}
{{ radius_block(v, k, operator, (ind + indent_increment)) }}
        {%- endif %}
        {%- endfor %}
{{ '}'|indent(ind, True) }}
    {%- elif value is iterable -%}
        {%- for v in value %}
{{ radius_block(v, key, operator, ind) }}
        {%- endfor -%}
    {%- endif -%}
{%- endmacro -%}

# FreeRADIUS module configuration
#
# **** DO NOT EDIT THIS FILE ****
#
# This file is managed by Salt.

{{ radius_block(mod, name) }}
